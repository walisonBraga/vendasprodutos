<app-tolbar-navigation></app-tolbar-navigation>

<div class="flex grid justify-content-center gap-6 my-6">
  <p-fieldset class="gap-1">
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-1 px-2">
        <a class="pi pi-box"></a>
        <span class="font-bold">Quantidade de itens</span>
      </div>
    </ng-template>
    <p class="m-0">
      <a class="pi pi-book"></a>
      {{ quantityOfItems() }}
    </p>
  </p-fieldset>

  <p-fieldset class="gap-1 btn btn-primary">
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-1 px-2">
        <a class="pi pi-star"></a>
        <span class="font-bold">faturamento da STARGAMER</span>
      </div>
    </ng-template>
    <p class="m-0">
      <a class="pi pi-calculator"></a>
      {{ calculateTotalSales() | currency : " symbol" : "R$" }}
    </p>
  </p-fieldset>
</div>

<p-carousel
  [value]="displayProducts"
  [numVisible]="3"
  [numScroll]="3"
  [circular]="false"
  [responsiveOptions]="responsiveOptions"
  [autoplayInterval]="3000"
>
  <ng-template let-displayProducts pTemplate="item">
    <div class="border-1 surface-border border-round m-2 text-center py-5 px-1">
      <div class="mb-3">
        <p-image
          src="{{ displayProducts.imgProducts }}"
          alt="Image"
          width="130"
          [preview]="true"
          [alt]="displayProducts.nme"
          class="w-6 shadow-2"
        ></p-image>
      </div>
      <div>
        <h4 class="mb-1">{{ displayProducts.nome }}</h4>
        <h5 class="mt-0 mb-3">
          {{ displayProducts.price | currency : " symbol" : "R$" }}
        </h5>
        <p-fieldset class="fieldset" legend="DESCRIÇÃO DO PRODUTO" [toggleable]="true">
          <p>
            {{ displayProducts.description }}
          </p>
        </p-fieldset>
        <div
          [ngClass]="{
            outofstock: displayProducts.quantity === 0,
            lowstock:
            displayProducts.quantity > 0 && displayProducts.quantity < 10,
            instock: displayProducts.quantity > 10
          }"
        ></div>
        <h3>Restam: {{ displayProducts.quantity }}</h3>
        <p-tag
          [value]="displayProducts.inventoryStatus"
          [severity]="getSeverity(displayProducts.inventoryStatus)"
        ></p-tag>
        <div class="mt-5 flex align-items-center justify-content-center gap-2">
          <p-button
            icon="pi pi-pencil"
            (onClick)="modalShow(displayProducts.uid)"
            [disabled]="false"
            [rounded]="true"
            />
            <p-button
            icon="pi pi-trash"
            (click)="deleteProduct(displayProducts.uid)"
            icon="pi pi-trash"
            [rounded]="true"
            severity="danger"
          />
        </div>
      </div>
    </div>
  </ng-template>
</p-carousel>

<form [formGroup]="updateForm" (ngSubmit)="updateSubmit()">
  <p-dialog
    header="Header"
    #sidebarRef
    [(visible)]="sidebarVisible"
    [(visible)]="visible"
    [modal]="true"
    [style]="{ width: '50vw' }"
    [draggable]="false"
    [resizable]="false"
  >
    <ng-template pTemplate="headless">
      <div
        class="flex flex-column px-8 py-5 gap-4"
        style="
          border-radius: 12px;
          background-image: radial-gradient(
            circle at left top,
            var(--primary-400),
            var(--primary-700)
          );
        "
      >
        <span>
          <p-button
            type="button"
            (onClick)="closeCallback($event)"
            icon="pi pi-times"
            [rounded]="true"
            [outlined]="true"
            styleClass="h-2rem w-2rem"
            severity="danger"
          ></p-button>
        </span>

        <div class="inline-flex flex-column gap-2">
          <label for="nome" class="text-primary-50 font-semibold"
            >Nome do Produto</label
          >
          <input
            pInputText
            id="nome"
            class="bg-white-alpha-20 border-none p-3 text-primary-50"
            formControlName="nome"

          />
        </div>

        <div class="inline-flex flex-column gap-2">
          <label for="description" class="text-primary-50 font-semibold"
            >Descrição do Produto</label
          >
          <textarea
            pInputText
            id="description"
            class="bg-white-alpha-20 border-none p-3 text-primary-50"
            pTooltip="Descrição"
            id="float-input"
            rows="5"
            cols="30"
            formControlName="description"
          ></textarea>
        </div>
        <div class="inline-flex flex-column gap-2">
          <label
            for="inventoryStatus"
            class="flex justify-content-center text-primary-50 font-semibold"
            >Estoque</label
          >

          <div
            id="inventoryStatus"
            class="flex justify-content-center bg-white-alpha-20 border-none p-3 text-primary-50"
            type="inventoryStatus"
          >
            <mat-radio-group
              formControlName="inventoryStatus"
              aria-label="Select an option"
            >
              <mat-radio-button class="m-2" value="EM ESTOQUE"
                >EM ESTOQUE</mat-radio-button
              >
              <mat-radio-button class="m-2" value="BAIXO ESTOQUE"
                >BAIXO ESTOQUE</mat-radio-button
              >
              <mat-radio-button class="m-2" value="FORA DE ESTOQUE"
                >FORA DE ESTOQUE</mat-radio-button
              >
            </mat-radio-group>
          </div>
        </div>
        <div class="inline-flex flex-column gap-2">
          <label
            for="category"
            class="flex justify-content-center text-primary-50 font-semibold"
            >Categoria</label
          >

          <div
            id="category"
            class="flex justify-content-center bg-white-alpha-20 border-none p-3 text-primary-50"
            type="category"
          >
            <mat-radio-group
              formControlName="category"
              aria-label="Select an option"
            >
              <mat-radio-button class="m-2 text-primary-50 font-semibold" value="eletronicos"
                >Eletronicos</mat-radio-button
              >
              <mat-radio-button class="m-2" value="acessórios"
                >Acessórios</mat-radio-button
              >
              <mat-radio-button class="m-2" value="gamer"
                >Gamer</mat-radio-button
              >
            </mat-radio-group>
          </div>
        </div>
        <div class="formgrid grid">
          <div class="inline-flex flex-column gap-2">
            <label for="price" class="text-primary-50 font-semibold"
              >Valor da unidade</label
            >

            <div
              id="price"
              class="bg-white-alpha-10 rounded-lg shadow-md w-full"
              type="price"
            >
              <p-inputNumber
                pInputText
                id="description"
                class="bg-white-alpha-20 border-none p-3 text-primary-50"
                pTooltip="Valor da unidade"
                inputId="currency-BRL"
                mode="currency"
                currency="BRL"
                locale="pt-BR"
                formControlName="price"
                [step]="0.1"
              >
              </p-inputNumber>
            </div>
          </div>
          <div class="m-lg-3 inline-flex flex-column gap-2">
            <label for="quantity" class="text-primary-50 font-semibold"
              >Quantidade itens</label
            >

            <div
              id="quantity"
              class="bg-white-alpha-10 rounded-lg shadow-md w-full"
              type="quantity"
            >
              <p-inputNumber
                pInputText
                id="quantity"
                class="bg-white-alpha-20 border-none p-3 text-primary-50"
                inputId="integeronly"
                formControlName="quantity"
                pTooltip="Quantidade itens"
              >
              </p-inputNumber>
            </div>
          </div>
          <p-button type="submit" label="Update"></p-button>
        </div>
      </div>
    </ng-template>
  </p-dialog>
</form>
